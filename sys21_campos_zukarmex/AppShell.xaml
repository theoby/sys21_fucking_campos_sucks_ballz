<?xml version="1.0" encoding="UTF-8" ?>
<Shell x:Class="sys21_campos_zukarmex.AppShell"
       xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
       xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
       xmlns:local="clr-namespace:sys21_campos_zukarmex.Views"
       xmlns:machinery="clr-namespace:sys21_campos_zukarmex.Views.MachineryUsage"
       xmlns:rainfall="clr-namespace:sys21_campos_zukarmex.Views.Rainfall"
       xmlns:rattrapping="clr-namespace:sys21_campos_zukarmex.Views.RatTrapping"
       xmlns:rodenticide="clr-namespace:sys21_campos_zukarmex.Views.RodenticideConsumption"
       xmlns:damageassessment="clr-namespace:sys21_campos_zukarmex.Views.DamageAssessment"
       xmlns:irrigationline="clr-namespace:sys21_campos_zukarmex.Views.IrrigationLine"
       xmlns:controls="clr-namespace:sys21_campos_zukarmex.Controls"
       xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
       Shell.FlyoutBehavior="Flyout"
       Shell.FlyoutWidth="300"
       Shell.NavBarIsVisible="True"
       Shell.FlyoutIcon="hamburger_menu.png">

    <!-- Custom Flyout Header -->
    <Shell.FlyoutHeader>
        <controls:CustomFlyoutHeader />
    </Shell.FlyoutHeader>

    <!-- FlyoutContent: Expander "GENERAL" -->
    <Shell.FlyoutContent>
        <ScrollView>
            <VerticalStackLayout Padding="10"
                                 Spacing="0">

                <!-- Expander GENERAL -->
                <toolkit:Expander>
                    <toolkit:Expander.Header>
                        <Grid Padding="10"
                              BackgroundColor="{DynamicResource Gray200}">
                            <Label Text="GENERAL"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="{DynamicResource Primary}" />
                        </Grid>
                    </toolkit:Expander.Header>

                    <VerticalStackLayout Padding="10,5">
                        <Button Text="Inicio"
                                CommandParameter="//home"
                                Clicked="OnGeneralNavClicked"
                                BackgroundColor="Transparent"
                                TextColor="{DynamicResource Gray900}" />
                    </VerticalStackLayout>
                </toolkit:Expander>

                <!-- Expander USO DE MAQUINARIA -->
                <toolkit:Expander>
                    <toolkit:Expander.Header>
                        <Grid Padding="10"
                              BackgroundColor="{DynamicResource Gray200}">
                            <Label Text="USO DE MAQUINARIA"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="{DynamicResource Primary}" />
                        </Grid>
                    </toolkit:Expander.Header>

                    <VerticalStackLayout Padding="10,5">
                        <Button Text="Maquinaria"
                                CommandParameter="//machineryUsage"
                                Clicked="OnGeneralNavClicked"
                                BackgroundColor="Transparent"
                                TextColor="{DynamicResource Gray900}" />
                    </VerticalStackLayout>
                </toolkit:Expander>


                <!-- Expander PRECIPITACION PLUVIAL -->
                <toolkit:Expander>
                    <toolkit:Expander.Header>
                        <Grid Padding="10"
                              BackgroundColor="{DynamicResource Gray200}">
                            <Label Text="PRECIPITACION PLUVIAL"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="{DynamicResource Primary}" />
                        </Grid>
                    </toolkit:Expander.Header>

                    <Button Text="Pluvial"
                            CommandParameter="//rainfall"
                            Clicked="OnGeneralNavClicked"
                            BackgroundColor="Transparent"
                            TextColor="{DynamicResource Gray900}" />
                </toolkit:Expander>


                <!-- Expander TRAMPEO DE RATA -->
                <toolkit:Expander>
                    <toolkit:Expander.Header>
                        <Grid Padding="10"
                              BackgroundColor="{DynamicResource Gray200}">
                            <Label Text="TRAMPEO DE RATA"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="{DynamicResource Primary}" />
                        </Grid>
                    </toolkit:Expander.Header>

                    <VerticalStackLayout Padding="10,5">
                    <Button Text="Trampeo de Ratas"
                            CommandParameter="//ratTrapping"
                            Clicked="OnGeneralNavClicked"
                            BackgroundColor="Transparent"
                            TextColor="{DynamicResource Gray900}" />
                    
                    <Button Text="Por Enviar"
                             CommandParameter="//ratTrappingPending"
                             Clicked="OnGeneralNavClicked"
                             BackgroundColor="Transparent"
                             TextColor="{DynamicResource Gray900}" />
                    
                    <Button Text="Historial"
                             CommandParameter="//ratTrappingHistory"
                             Clicked="OnGeneralNavClicked"
                             BackgroundColor="Transparent"
                             TextColor="{DynamicResource Gray900}" />
                    </VerticalStackLayout>
                    
                </toolkit:Expander>

                <!-- Expander CONSUMO DE RODENTICIDA -->
                <toolkit:Expander>
                    <toolkit:Expander.Header>
                        <Grid Padding="10"
                              BackgroundColor="{DynamicResource Gray200}">
                            <Label Text="CONSUMO DE RODENTICIDA"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="{DynamicResource Primary}" />
                        </Grid>
                    </toolkit:Expander.Header>

                    <VerticalStackLayout Padding="10,5">
                        <Button Text="Rodenticida"
                                CommandParameter="//rodenticideConsumption"
                                Clicked="OnGeneralNavClicked"
                                BackgroundColor="Transparent"
                                TextColor="{DynamicResource Gray900}" />
                        <Button Text="Por Enviar"
                                CommandParameter="//rodenticidePending"
                                Clicked="OnGeneralNavClicked"
                                BackgroundColor="Transparent"
                                TextColor="{DynamicResource Gray900}" />          
                        <Button Text="Historial"
                                CommandParameter="//rodenticideHistory"
                                Clicked="OnGeneralNavClicked"
                                BackgroundColor="Transparent"
                                TextColor="{DynamicResource Gray900}" />
                    </VerticalStackLayout>
                </toolkit:Expander>

                <!-- Expander MUESTRO DE DAÑO -->
                <toolkit:Expander>
                    <toolkit:Expander.Header>
                        <Grid Padding="10"
                              BackgroundColor="{DynamicResource Gray200}">
                            <Label Text="MUESTRO DE DAÑO"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="{DynamicResource Primary}" />
                        </Grid>
                    </toolkit:Expander.Header>

                    <VerticalStackLayout Padding="10,5">
                        <Button Text="Forma"
                                CommandParameter="//damageAssessment"
                                Clicked="OnGeneralNavClicked"
                                BackgroundColor="Transparent"
                                TextColor="{DynamicResource Gray900}" />
                        <Button Text="Por Enviar"
                                CommandParameter="//damageAssessmentPending"
                                Clicked="OnGeneralNavClicked"
                                BackgroundColor="Transparent"
                                TextColor="{DynamicResource Gray900}" />
                        <Button Text="Historial"
                                CommandParameter="//damageAssessmentHistory"
                                Clicked="OnGeneralNavClicked"
                                BackgroundColor="Transparent"
                                TextColor="{DynamicResource Gray900}" />

                    </VerticalStackLayout>
                </toolkit:Expander>

                <!-- Expander LINEA DE RIEGO -->
                <toolkit:Expander>
                    <toolkit:Expander.Header>
                        <Grid Padding="10"
                              BackgroundColor="{DynamicResource Gray200}">
                            <Label Text="LINEA DE RIEGO"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="{DynamicResource Primary}" />
                        </Grid>
                    </toolkit:Expander.Header>

                    <VerticalStackLayout Padding="10,5">
                        <Button Text="Forma"
                                CommandParameter="//irrigationLine"
                                Clicked="OnGeneralNavClicked"
                                BackgroundColor="Transparent"
                                TextColor="{DynamicResource Gray900}" />
                        
                        <Button Text="Por Enviar"
                                CommandParameter="//irrigationLinePending"
                                Clicked="OnGeneralNavClicked"
                                BackgroundColor="Transparent"
                                TextColor="{DynamicResource Gray900}" />
                        
                        <Button Text="Historial"
                                 CommandParameter="//irrigationLineHistory"
                                 Clicked="OnGeneralNavClicked"
                                 BackgroundColor="Transparent"
                                 TextColor="{DynamicResource Gray900}" />
                    </VerticalStackLayout>
                </toolkit:Expander>


                <!-- Opcional: puedes añadir separadores u otros enlaces aquí -->
            </VerticalStackLayout>
        </ScrollView>
    </Shell.FlyoutContent>

    <!-- Flyout Footer -->
    <Shell.FlyoutFooter>
        <Grid BackgroundColor="{DynamicResource Gray100}"
              Padding="20,15">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <StackLayout Grid.Column="0"
                         Orientation="Vertical">
                <Label Text="Version 1.0.0"
                       FontSize="15"
                       TextColor="{DynamicResource Gray600}" />
                <Label Text="(c) 2024 Zucarmex"
                       FontSize="15"
                       TextColor="{DynamicResource Gray500}" />
            </StackLayout>

            <Button Grid.Column="1"
                    Text="Cerrar Sesion"
                    FontSize="15"
                    BackgroundColor="Transparent"
                    TextColor="{DynamicResource Error}"
                    Clicked="OnLogoutClicked" />
        </Grid>
    </Shell.FlyoutFooter>

    <!-- Loading Flow -->
    <ShellContent Route="loading"
                  ContentTemplate="{DataTemplate local:LoadingPage}"
                  Shell.FlyoutBehavior="Disabled" />

    <!-- Login Flow -->
    <ShellContent Route="login"
                  ContentTemplate="{DataTemplate local:LoginPage}"
                  Shell.FlyoutBehavior="Disabled" />

    <!-- Admin Config Flow -->
    <ShellContent Route="adminconfig"
                  ContentTemplate="{DataTemplate local:AdminConfigPage}"
                  Shell.FlyoutBehavior="Disabled" />

    <!-- Sync Flow -->
    <ShellContent Route="sync"
                  ContentTemplate="{DataTemplate local:SyncPage}"
                  Shell.FlyoutBehavior="Disabled" />

    <!-- Navigation Demo -->
    <ShellContent Route="navigationdemo"
                  ContentTemplate="{DataTemplate local:NavigationDemoPage}"
                  Shell.FlyoutBehavior="Disabled" />

    <!-- NOTE:
         Las páginas del menú GENERAL se navegan por ruta desde los botones del Expander.
         Asegúrate de que las rutas (ej. "home","vale","autorizacion","ratTrapping","rodenticideConsumption","damageAssessment","irrigationLine")
         estén disponibles en la navegación de tu app (por ejemplo con FlyoutItems o ShellContent con esas rutas).
         A continuación incluyo ShellContent para esas rutas si las quieres registradas también. -->

    <!-- Registro de páginas accesibles por ruta (puedes mantenerlos aunque el menú principal sea el Expander) -->
    <ShellContent Route="home"
                  ContentTemplate="{DataTemplate local:HomePage}" />
    <ShellContent Route="machineryUsage"
                  ContentTemplate="{DataTemplate machinery:MachineryUsagePage}" />
    <ShellContent Route="rainfall"
                  ContentTemplate="{DataTemplate rainfall:RainfallPage}" />
    
    <ShellContent Route="ratTrapping"
                  ContentTemplate="{DataTemplate rattrapping:RatTrappingPage}" />

    <ShellContent Route="ratTrappingPending"
                  ContentTemplate="{DataTemplate rattrapping:RatTrappingPendingPage}" />
    
    <ShellContent Route="ratTrappingHistory"
                  ContentTemplate="{DataTemplate rattrapping:RatTrappingHistoryPage}" />
    
    <ShellContent Route="rodenticideConsumption"
                  ContentTemplate="{DataTemplate rodenticide:RodenticideConsumptionPage}" />

    <ShellContent Route="rodenticidePending"
                  ContentTemplate="{DataTemplate rodenticide:RodenticideConsumptionPendingPage}" />

    <ShellContent Route="rodenticideHistory"
                  ContentTemplate="{DataTemplate rodenticide:RodenticideConsumptionHistoryPage}" />
    
    <ShellContent Route="damageAssessment"
                  ContentTemplate="{DataTemplate damageassessment:DamageAssessmentPage}" />
    <ShellContent Route="damageAssessmentPending"
                  ContentTemplate="{DataTemplate damageassessment:DamageAssessmentPendingPage}" />
    <ShellContent Route="damageAssessmentHistory"
                  ContentTemplate="{DataTemplate damageassessment:DamageAssessmentHistoryPage}" />
    <ShellContent Route="irrigationLine"
                  ContentTemplate="{DataTemplate irrigationline:IrrigationLinePage}" />
    <ShellContent Route="irrigationLinePending"
                  ContentTemplate="{DataTemplate irrigationline:IrrigationLinePendingPage}" />
    <ShellContent Route="irrigationLineHistory"
                  ContentTemplate="{DataTemplate irrigationline:IrrigationLineHistoryPage}" />

    <!-- Shell Resources / Styles -->
    <Shell.Resources>
        <Style TargetType="Shell">
            <Setter Property="Shell.BackgroundColor"
                    Value="{DynamicResource White}" />
            <Setter Property="Shell.ForegroundColor"
                    Value="{DynamicResource Primary}" />
            <Setter Property="Shell.TitleColor"
                    Value="White" />
            <Setter Property="Shell.DisabledColor"
                    Value="{DynamicResource Gray200}" />
            <Setter Property="Shell.UnselectedColor"
                    Value="{DynamicResource Gray400}" />
        </Style>

        <Style TargetType="FlyoutItem">
            <Setter Property="Shell.BackgroundColor"
                    Value="{DynamicResource White}" />
            <Setter Property="Shell.ForegroundColor"
                    Value="{DynamicResource Gray900}" />
            <Setter Property="Shell.TitleColor"
                    Value="{DynamicResource Gray900}" />
        </Style>

        <Style TargetType="ShellContent">
            <Setter Property="Shell.BackgroundColor"
                    Value="{DynamicResource Primary}" />
            <Setter Property="Shell.ForegroundColor"
                    Value="White" />
            <Setter Property="Shell.TitleColor"
                    Value="White" />
        </Style>

        <!-- Estilo simple para los botones del Expander -->
        <Style x:Key="FlyoutButtonStyle"
               TargetType="Button">
            <Setter Property="BackgroundColor"
                    Value="Transparent" />
            <Setter Property="TextColor"
                    Value="{DynamicResource Gray900}" />
            <Setter Property="HorizontalOptions"
                    Value="FillAndExpand" />
            <Setter Property="CornerRadius"
                    Value="6" />
            <Setter Property="Padding"
                    Value="10" />
            <Setter Property="FontAttributes"
                    Value="None" />
        </Style>
    </Shell.Resources>

</Shell>
